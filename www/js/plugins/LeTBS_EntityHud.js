var Lecode=Lecode||{};Lecode.S_TBS.EntityHud={};var parameters=PluginManager.parameters("LeTBS_EntityHud");function Window_TBSEntityHud(){this.initialize.apply(this,arguments)}Lecode.S_TBS.EntityHud.oldTBSEntity_createComponents=TBSEntity.prototype.createComponents,TBSEntity.prototype.createComponents=function(){Lecode.S_TBS.EntityHud.oldTBSEntity_createComponents.call(this),this._miniHud=new Window_TBSEntityHud(this),BattleManagerTBS.getLayer("movableInfo").addChild(this._miniHud)},Lecode.S_TBS.EntityHud.oldTBSEntity_update=TBSEntity.prototype.update,TBSEntity.prototype.update=function(){Lecode.S_TBS.EntityHud.oldTBSEntity_update.call(this),this._miniHud.updatePosition()},Lecode.S_TBS.EntityHud.oldTBSEntity_onMouseOver=TBSEntity.prototype.onMouseOver,TBSEntity.prototype.onMouseOver=function(){Lecode.S_TBS.EntityHud.oldTBSEntity_onMouseOver.call(this),this.showMiniHud()},Lecode.S_TBS.EntityHud.oldTBSEntity_onMouseOut=TBSEntity.prototype.onMouseOut,TBSEntity.prototype.onMouseOut=function(){Lecode.S_TBS.EntityHud.oldTBSEntity_onMouseOut.call(this),this.hideMiniHud()},Lecode.S_TBS.EntityHud.oldTBSEntity_onTurnEnd=TBSEntity.prototype.onTurnEnd,TBSEntity.prototype.onTurnEnd=function(){Lecode.S_TBS.EntityHud.oldTBSEntity_onTurnEnd.call(this),this._miniHud.refresh()},Lecode.S_TBS.EntityHud.oldTBSEntity_onDamage=TBSEvent.prototype.onDamage,TBSEvent.prototype.onDamage=function(t){Lecode.S_TBS.EntityHud.oldTBSEntity_onDamage.call(this,t),this._miniHud.refresh()},TBSEntity.prototype.showMiniHud=function(){this._miniHud.contentsOpacity=255,this._miniHud.refresh()},TBSEntity.prototype.hideMiniHud=function(){this._miniHud.contentsOpacity=0},Window_TBSEntityHud.prototype=Object.create(Window_Base.prototype),(Window_TBSEntityHud.prototype.constructor=Window_TBSEntityHud).prototype.initialize=function(t){this._entity=t;var i=this.windowWidth(),n=this.windowHeight();Window_Base.prototype.initialize.call(this,0,0,i,n),this.opacity=0,this.contentsOpacity=0,this.refresh(),this.updatePosition()},Window_TBSEntityHud.prototype.minWindowWidth=function(){return 300},Window_TBSEntityHud.prototype.minWindowHeight=function(){return 200},Window_TBSEntityHud.prototype.windowWidth=function(){return 300},Window_TBSEntityHud.prototype.windowHeight=function(){return 200},Window_TBSEntityHud.prototype.updatePosition=function(){var t=this._entity._posX-this.windowWidth()/2,i=this._entity._posY;this.x=t+this._entity.width()/2,this.y=i},Window_TBSEntityHud.prototype.refresh=function(){this.contents.clear(),this.resetFontSettings();var t,i=this._entity.battler();this.contents.fontSize-=4,this.changeTextColor(this.systemColor()),this.leU_drawText(i.name(),"center",0),t=this.contentsWidth()/2-23;var n=this.hpGaugeColor1(),o=this.hpGaugeColor2();this.drawGauge(t,0,46,i.hpRate(),n,o)},Window_TBSEntityHud.prototype.gaugeHeight=function(){return 5};