var makeVideoPlayableInline=function(){"use strict";function i(n,e,r,i){function t(e){Boolean(n[r])===Boolean(i)&&e.stopImmediatePropagation(),delete n[r]}return n.addEventListener(e,t,!1),t}function t(e,n,r,i){function t(e){r[n]=e}i&&t(e[n]),Object.defineProperty(e,n,{get:function(){return r[n]},set:t})}function d(e,n,r){r.addEventListener(n,function(){return e.dispatchEvent(new Event(n))})}function a(e,n){Promise.resolve().then(function(){e.dispatchEvent(new Event(n))})}function o(e,n,r){(p||0)+200<Date.now()&&(e[m]=!0,p=Date.now()),r||(e.currentTime=n),g[++b%3]=100*n|0}function u(e){return e.driver.currentTime>=e.video.duration}function s(){var e=this,n=e[f];return e.webkitDisplayingFullscreen?void e[y]():("data:"!==n.driver.src&&n.driver.src!==e.src&&(o(e,0,!0),n.driver.src=e.src),void(e.paused&&(n.paused=!1,e.buffered.length||e.load(),n.driver.play(),n.updater.start(),n.hasAudio||(a(e,"play"),n.video.readyState>=n.video.HAVE_ENOUGH_DATA&&a(e,"playing")))))}function c(e){var n=this,r=n[f];r.driver.pause(),r.updater.stop(),n.webkitDisplayingFullscreen&&n[h](),r.paused&&!e||(r.paused=!0,r.hasAudio||a(n,"pause"),n.ended&&(n[m]=!0,a(n,"ended")))}function v(n,e){var r=n[f]={};r.paused=!0,r.hasAudio=e,r.video=n,r.updater=function(e){return function(n,r,e,i){function t(e){d=r(t,i),n(e-(a||e)),a=e}var d,a;return{start:function(){d||t(0)},stop:function(){e(d),d=null,a=0}}}(e,requestAnimationFrame,cancelAnimationFrame)}(function(e){var n=this;n.video.readyState>=n.video.HAVE_FUTURE_DATA?(n.hasAudio||(n.driver.currentTime=n.video.currentTime+e*n.video.playbackRate/1e3,n.video.loop&&u(n)&&(n.driver.currentTime=0)),o(n.video,n.driver.currentTime)):n.video.networkState!==n.video.NETWORK_IDLE||n.video.buffered.length||n.video.load(),n.video.ended&&(delete n.video[m],n.video.pause(!0))}.bind(r)),e?r.driver=function(e){var n=new Audio;return d(e,"play",n),d(e,"playing",n),d(e,"pause",n),n.crossOrigin=e.crossOrigin,n.src=e.src||e.currentSrc||"data:",n}(n):(n.addEventListener("canplay",function(){n.paused||a(n,"playing")}),r.driver={src:n.src||n.currentSrc||"data:",muted:!0,paused:!0,pause:function(){r.driver.paused=!0},play:function(){r.driver.paused=!1,u(r)&&o(n,0)},get ended(){return u(r)}}),n.addEventListener("emptied",function(){var e=!r.driver.src||"data:"===r.driver.src;r.driver.src&&r.driver.src!==n.src&&(o(n,0,!0),r.driver.src=n.src,e?r.driver.play():r.updater.stop())},!1),n.addEventListener("webkitbeginfullscreen",function(){n.paused?e&&!r.driver.buffered.length&&r.driver.load():(n.pause(),n[y]())}),e&&(n.addEventListener("webkitendfullscreen",function(){r.driver.currentTime=n.currentTime}),n.addEventListener("seeking",function(){g.indexOf(100*n.currentTime|0)<0&&(r.driver.currentTime=n.currentTime)}))}function e(e,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0),r&&!l||e[f]||(v(e,n),function(e){var n=e[f];e[y]=e.play,e[h]=e.pause,e.play=s,e.pause=c,t(e,"paused",n.driver),t(e,"muted",n.driver,!0),t(e,"playbackRate",n.driver,!0),t(e,"ended",n.driver),t(e,"loop",n.driver,!0),i(e,"seeking"),i(e,"seeked"),i(e,"timeupdate",m,!1),i(e,"ended",m,!1)}(e),e.classList.add("IIV"),!n&&e.autoplay&&e.play(),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments"))}var p,n="undefined"==typeof Symbol?function(e){return"@"+(e||"@")+Math.random()}:Symbol,l="object-fit"in document.head.style&&/iPhone|iPod/i.test(navigator.userAgent)&&!matchMedia("(-webkit-video-playable-inline)").matches,f=n(),m=n(),y=n("nativeplay"),h=n("nativepause"),g=[],b=0;return e.isWhitelisted=l,e}();